@inherits LayoutComponentBase
<MudThemeProvider />
<MudDialogProvider />
<MudSnackbarProvider />
<MudPopoverProvider />
<MudBreakpointProvider />
@inject NavigationManager NavigationManager

<MudLayout>
    <MudAppBar  Fixed="true" Class="app-bar-css">
        <MudIconButton Icon="@Icons.Material.Filled.Menu" Class="menu-css" Edge="Edge.Start" OnClick="@((e) => DrawerToggle())" />

        <MudText Typo="Typo.h4" Class="title" >MiddleMan</MudText>
        <MudSpacer/>
        <MudText Typo="Typo.h6">@role</MudText>
        @* <MudIconButton Icon="@Icons.Material.Filled.Notifications" Class="icon-color" Href="/reader/notifications"></MudIconButton> *@
        <MudMenu Icon="@Icons.Material.Filled.AccountCircle" Class="icon-color" AnchorOrigin="Origin.BottomRight" TransformOrigin="Origin.TopRight">
            <MudMenuItem Href="/reader/profile">Profile</MudMenuItem>
            <MudMenuItem Href="/reader/logout">Logout</MudMenuItem>
        </MudMenu>
    </MudAppBar>
    <MudDrawer @bind-Open="_drawerOpen" Variant="DrawerVariant.Mini" Elevation="1" ClipMode="DrawerClipMode.Always" MiniVariantWidth="56px" Width="180px" class="drawer-css">
        <MudNavMenu Class="mt-5">
            <MudNavLink Href="/reader" Icon="@Icons.Material.Filled.Home" Match="NavLinkMatch.All" Class="custom-icon">
                @if (_drawerOpen)
                {
                    <span>Home</span>
                }
            </MudNavLink>

            <MudNavLink Href="/reader/search" Icon="@Icons.Material.Filled.Search" Class="custom-icon">
                @if (_drawerOpen)
                {
                    <span>Explore</span>
                }
            </MudNavLink>

            <MudNavLink Href="/reader/library" Icon="@Icons.Material.Filled.LibraryBooks" Class="custom-icon">
                @if (_drawerOpen)
                {
                    <span>Library</span>
                }
            </MudNavLink>

            
            <MudNavLink Href="/reader/chat" Icon="@Icons.Material.Filled.AutoAwesome" Class="custom-icon">
                @if (_drawerOpen)
                {
                    <span>Chat with AI</span>
                }
            </MudNavLink>
            <MudNavLink Href="/reader/chat-history" Icon="@Icons.Material.Filled.History" Class="custom-icon">
                @if (_drawerOpen)
                {
                    <span>Chat History</span>
                }
            </MudNavLink>
            <MudNavLink Href="/reader/profile" Icon="@Icons.Material.Filled.AccountCircle" Class="custom-icon">
                @if (_drawerOpen)
                {
                    <span>Profile</span>
                }
            </MudNavLink>
            
            <MudNavLink @onclick="GoToLogout" Icon="@Icons.Material.Filled.Logout" Class="custom-icon">
                @if (_drawerOpen)
                {
                    <span>Logout</span>
                }
            </MudNavLink>

        </MudNavMenu>
    </MudDrawer>

    <MudMainContent>
        @Body
    </MudMainContent>
</MudLayout>
@code {
    bool _drawerOpen = true;
    private string role = "Reader";
    void DrawerToggle()
    {
        _drawerOpen = !_drawerOpen;
    }
    void GoToLogout()
    {
        NavigationManager.NavigateTo("/");
    }
}

<style>
    .app-bar-css{
        background: linear-gradient(135deg,#3d387a,#E9D5FF);
        /* background: linear-gradient(135deg,#65609e,#E9D5FF); */
        color:black;
    }
    .mud-drawer{
        color:black;
    }
    .mud-icon-root {
        color: #1f2937;
    }
    .custom-icon .mud-icon-root {
        color: #0a2340 !important;
    }
    
    .mud-nav-link.active {
        background: rgba(99, 102, 241, 0.12);
        color: #4f46e5 !important;
        border-radius: 8px;
        font-weight: 600;
    }
    .drawer-css
    {
        background: linear-gradient(180deg, #f3f0ff, #e8e3ff);
        border-right: 1px solid rgba(0,0,0,0.05);
    }
    .title{
        font-family: 'Baskerville Old Face';
        font-weight: 500;
        color: ghostwhite;
    }
    .menu-css{
        margin-right:10px;
        color:ghostwhite;
    }
    .menu-css .mud-icon-root{
        color:aliceblue;
    }
</style>